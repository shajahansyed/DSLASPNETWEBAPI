

SELECT * FROM HumanResources.Department;

ALTER PROCEDURE uspAddNewDept 
(@deptName NVARCHAR(50), @deptGroupName NVARCHAR(50), @deptDate DATETIME, @deptID INT OUT)
AS 
BEGIN
	BEGIN TRY
		IF @deptName IS NOT NULL
		BEGIN
			IF @deptGroupName IS NOT NULL
			BEGIN
				INSERT INTO HumanResources.Department(Name, GroupName, ModifiedDate) VALUES(@deptName,@deptGroupName,@deptDate)
				SELECT @deptID = MAX(DepartmentID) FROM HumanResources.Department
				RETURN 1
			END
			ELSE
				RETURN -1
		END
		ELSE
			RETURN -2
	END TRY
	BEGIN CATCH
		RETURN -199
    END CATCH
END


DECLARE @dept int
EXEC uspAddNewDept @deptName='Production Management', @deptGroupName ='Manufacturing', @deptDate='08-15-1999', @deptID = @dept OUTPUT
SELECT @dept as 'Max of Depts'